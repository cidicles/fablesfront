import React, { Component } from 'react';
import PropTypes from 'prop-types';
import './MainMenu.css';
import { Link } from 'react-router';
import { lang } from '../../../il8n/lang';
import { connect } from 'react-redux';
import { changeLanguage, changeUser } from '../../../Actions/Index';
import { apiBase, breakSmall } from '../../../const';
import { goFetch } from '../../../utils';

class MainMenu extends Component {
  constructor(props) {
    super(props);
    this.state = {
      ...props,
      menuClass: ''
    };
  }
  setLang(event) {
    this.props.dispatch(changeLanguage(event.target.value));
  }
  toggleLogo(){
    this.toggleMainMenu();
  }
  toggleMainMenu(requestor){
    let {menuClass} = this.state;
    if(window.innerWidth <= breakSmall){
      if(menuClass === 'active'){
        this.setState({
          menuClass: ''
        });
      } else {
        this.setState({
          menuClass: 'active'
        });
      }
    } else {
      switch(requestor){
        case 'logo':
          this.context.router.push('/');
          break;
        default:
      }
    }
  }
  getNavItem(index, nav){
    switch (nav.type){
      case 'internal':
        return(
          <Link key={`navigation-${ index }`} to={ nav.href } activeClassName="active" onClick={() => this.toggleMainMenu('link')}>
            { nav.display }
          </Link>
        );
      case 'external':
        return(
          <a key={`navigation-${ index }`} href={ nav.href } target='_blank' rel='noopener noreferrer'>
            { nav.display }
          </a>
        );
      default:
        console.error('Nav items must specify type.');
    }

  }
  logOut(){
    console.log('logout');
    let feedUrl = `${apiBase}user/logout`;
    let {token} = this.props.user;
    goFetch('post', feedUrl, {}, token).then((res) => {
      if(res.error){
        this.setState({
          status: res.message
        });
      } else {
        this.props.dispatch(changeUser({
          username: '',
          token: ''
        }));
      }
    });
  }
  getProfile(){
    let {username} = this.props.user;
    if(username){
      return(
        <div id='menu-profile'>
          <h3>{username}</h3>
          <div className='link' onClick={()=> this.logOut()}>logout</div>
        </div>
      )
    } else {
      return(
        <div id='menu-profile'>
          <ul>
            <li>
              <Link to={'/login'}>
                {lang.general.login}
              </Link>
            </li>
            <li>
              <Link to={'/register'}>
                {lang.general.register}
              </Link>
            </li>
          </ul>
        </div>
      )
    }
  }
  render() {
    let {menuClass} = this.state;
    return (
      <header className={menuClass}>
        <nav id='menu-main'>
          <div id="menu-toggle" onClick={() => this.toggleMainMenu('logo')}>
            <svg width="24" height="24" viewBox="0 0 24 24" alt={lang.toggleMenu}>
              <path d="M24 6h-24v-4h24v4zm0 4h-24v4h24v-4zm0 8h-24v4h24v-4z"/>
            </svg>
          </div>
          <div id='menu-logo'>
            <a onClick={() => this.toggleMainMenu('logo')}>
              <svg viewBox="0 0 26.88 8.83"><path d="M4.18.42a.56.56,0,0,0,0,.14A2.84,2.84,0,0,1,4.1.91.34.34,0,0,1,4,1.06h0l0,0h0a1.41,1.41,0,0,1-.61.08v0H3.2a0,0,0,0,1,0,0H3.08l-.16,0a0,0,0,0,1,0,0h0l-.11,0H2.65l-.18,0H2.35v0l0,.34a1,1,0,0,0,0,.16,1.31,1.31,0,0,1,0,.18v.49a.26.26,0,0,1,0,.13.16.16,0,0,0,0,.08.73.73,0,0,0,.06.23v.06a.07.07,0,0,0,0,0l0,.11q0,.53,0,1.07a1.61,1.61,0,0,0,0,.22h.24l.2,0h0a.1.1,0,0,1,.11,0v0H3l0,0H3a.12.12,0,0,1,.08,0h.06a.37.37,0,0,0,.16,0v0h.11a.06.06,0,0,0,.06,0h0v0h0v0h.06l.11,0,.07.06s0,0,0,0l0,0v.14h0v0h0l0,.36,0,0,0,0,0,0h0v0h0a.94.94,0,0,1-.38,0h0v0h0v0H3.16v0L3,5.17H2.84l-.16,0H2.38l-.07,0a.21.21,0,0,1,0,.08.26.26,0,0,1,0,.1l0,.11,0,.07a.7.7,0,0,1,0,.17V5.8c0,.06,0,.09,0,.11a.18.18,0,0,0,0,.07l0,0v.17a1.3,1.3,0,0,1,0,.22l0,.12h0a.2.2,0,0,1,0,.12v.16a2.33,2.33,0,0,0,0,.38,1.11,1.11,0,0,0,0,.19V7.5s0,0,0,.06a.26.26,0,0,1,0,.08.07.07,0,0,0,0,0V7.8a.38.38,0,0,0,0,.11L2.3,8l0,0,0,.06a.13.13,0,0,1,0,.06.49.49,0,0,1-.07.23l-.07.07a.06.06,0,0,0,0,0l-.06,0H1.93l0,0h0a.57.57,0,0,0-.32.07s-.07.06-.09.06-.06,0-.12-.12a.27.27,0,0,0-.2-.12.22.22,0,0,0-.11,0l0,0H1v0s0,0,0,0H1A1,1,0,0,1,.86,8c0-.21,0-.36,0-.46V7.3l0,0h0a.26.26,0,0,1,0-.08V6.93l0-.1a.17.17,0,0,0,0-.07l0-.26a.4.4,0,0,0,0-.1.41.41,0,0,1,0-.1l0-.12A.52.52,0,0,0,.92,6c0-.14,0-.26,0-.37V5.41c0-.07,0-.18,0-.31s0-.26,0-.36,0-.28,0-.4,0-.22,0-.35a.17.17,0,0,0,0-.07V3.85l0-.11V3.47l0,0V3.07l0,0a.12.12,0,0,1,0-.12V2.62q0-.13,0-.76V1.55a0,0,0,0,1,0,0,.05.05,0,0,1,0,0v0A2.61,2.61,0,0,1,1,1V.85A.49.49,0,0,1,1,.63.16.16,0,0,1,1,.55l0,0H1v0l0,0h0v0a.07.07,0,0,0,0,0V.31l0-.08a.07.07,0,0,1,0,0l0,0s0,0,0,0l.18,0a.35.35,0,0,0,.22,0h.29l.17-.1L2,.16l.36,0,.2,0h0l0-.06c.06,0,.1,0,.12,0l0,0,0,0H3a.12.12,0,0,1,.08,0h.28v0H3.4v0h0l0,0v0a.06.06,0,0,0,.07,0l.05,0h0l0,0,0,0h0a.33.33,0,0,1,.22,0,.53.53,0,0,1,.16.1l0,0a.09.09,0,0,1,0,0,.51.51,0,0,1,0,.09l0,0ZM2,.17H2Zm.8,0v0S2.77.12,2.77.13ZM3,4.38H3v0Z" transform="translate(-0.8 0.04)"/><path d="M9.24,8.33v0a.35.35,0,0,1,0,.16.32.32,0,0,1-.08.11l0,0L9,8.7l0,0c0,.06-.08.1-.13.1H8.88l0,0h0c-.07,0-.12,0-.13,0a.62.62,0,0,0-.19-.09l-.16-.07H8.18v0h0l0,0h0v0a.36.36,0,0,1-.1-.2A3.17,3.17,0,0,1,8,8.07a.86.86,0,0,0,0-.16h0l0,0V7.8l0-.11V7.47a1.25,1.25,0,0,1,0-.22l0-.17V7a.2.2,0,0,0,0-.1q0-.1-.06-.32L7.68,6.3q-.11-.44-.13-.59l-.17,0h0v0h0l-.06,0H7l-.1,0-.08,0-.07,0a.3.3,0,0,1-.13,0L6.36,6v0h0l0,0H6.2L6.12,6l0,.07a.26.26,0,0,0,0,.08h0l0,0,0,.1h0v0a8.13,8.13,0,0,0-.22,1,2,2,0,0,0-.06.29v0h0s0,.05,0,.06v0a3.23,3.23,0,0,1-.13.46.57.57,0,0,1,0,.11l0,.1,0,.06c0,.08,0,.12-.08.12v0h0a.07.07,0,0,1-.06,0h0l-.07,0v0h0v0a1,1,0,0,1-.36.07H4.86l-.12,0h0v0H4.63L4.5,8.64l-.08,0-.09,0s-.07-.07-.07-.1a.53.53,0,0,1,0-.14,2.33,2.33,0,0,1,.12-.68l.05-.21,0-.09L4.5,7q0-.1.11-.46c.06-.27.1-.42.1-.44a.39.39,0,0,1,0-.12v-.1l.13-.7L5,4.57q0-.12.16-.56V4l0-.08V3.82a.61.61,0,0,1,0-.19l0-.06,0,0,0,0,0-.12,0-.16a.14.14,0,0,1,0-.08h0c0-.06,0-.09,0-.1l0-.07v0a1.62,1.62,0,0,0,.12-.5V2.33a0,0,0,0,0,0,0V2.22a.16.16,0,0,1,0-.1l0,0a.69.69,0,0,0,0-.28.08.08,0,0,1,0-.08.27.27,0,0,0,0-.12l0-.06v0a.64.64,0,0,1,.06-.29.67.67,0,0,1,.06-.13l0-.07L5.8.72a.14.14,0,0,1,0-.1v0l0-.07,0,0h0l0-.1,0-.1L6,.19a.72.72,0,0,1,.3,0l.08,0h.59L7,.19l0,0s0,0,.05,0a0,0,0,0,1,0,0h0a0,0,0,0,1,0,0s0,0,.07,0h.11v0h.08s0,0,0,0h0v0h0s.09,0,.14.13a0,0,0,0,1,0,0v.2l0,.16a7.74,7.74,0,0,1,.23,1l.06.41,0,.2,0,.2,0,.25a7.91,7.91,0,0,0,.16.78.13.13,0,0,0,0,.06l0,.11a0,0,0,0,1,0,0s0,0,0,0l.1.49q.11.67.19,1l0,.31,0,.41,0,0,0,.07,0,0a1.1,1.1,0,0,1,.07.3c0,.06,0,.09,0,.1V6.6l0,0A1.46,1.46,0,0,1,9,7v.11H9A.36.36,0,0,1,9,7.3a2.49,2.49,0,0,0,.07.49v0a.07.07,0,0,0,0,0,.07.07,0,0,1,0,0V8a.39.39,0,0,0,0,.14s0,0,0,0h0l0,0,0,0v0h0Zm-3.79.25s0,0,0,0ZM7.37,4.85l0,0h0v-.1a1,1,0,0,0,0-.16,0,0,0,0,1,0,0,.05.05,0,0,0,0,0V4.37L7.27,4h0V3.87q0-.38-.23-1.2l0-.2c0-.09,0-.14,0-.17H7l0,0h0s0-.07,0-.08v0L6.9,2l-.07.43-.06.34h0a.58.58,0,0,1,0,.16.07.07,0,0,0,0,0,.37.37,0,0,1,0,.17l0,.07,0,.18-.08.24a.5.5,0,0,0,0,.22A1,1,0,0,0,6.5,4l0,.14a6.51,6.51,0,0,1-.08.7l0,.14h.23v0l.12,0a0,0,0,0,1,0,0v0h.18a.07.07,0,0,1,.07,0h0l.14,0h0v0h0l0,0v0h0v0Z" transform="translate(-0.8 0.04)"/><path d="M10.44,8.52l-.08-.1-.08-.1s0,0,0,0v0h0s0,0,0,0v0h0s0,0,0,0v0a2.59,2.59,0,0,1-.11-.48,1.81,1.81,0,0,1,0-.23V7l0,0a.14.14,0,0,1,0-.06V6.79a.07.07,0,0,1,0,0l0-.07a.14.14,0,0,0,0-.06l0-.14a.76.76,0,0,0,0-.14l0-.06a.23.23,0,0,0,0-.07V6.13a.63.63,0,0,0,0-.3V5.65a1.43,1.43,0,0,1,0-.2,3.6,3.6,0,0,0,0-.44V4.95a0,0,0,0,1,0,0l0-.06V4.69a0,0,0,0,1,0,0l0,0v0s0-.07,0-.12a.57.57,0,0,1,0-.14h0l0-.1a1.28,1.28,0,0,0,0-.22c0-.08,0-.16,0-.24V3.25a1.31,1.31,0,0,1,0-.18l0-.17,0,0a.18.18,0,0,1,0-.07v0q0-.3,0-.78l0-.23s0-.08,0-.12a.38.38,0,0,1,0-.12V1.27l0-.26,0-.14a.16.16,0,0,0,0-.07.07.07,0,0,1,0,0h0v0a.09.09,0,0,1,0-.05l0,0,0,0a0,0,0,0,0,0,0,.05.05,0,0,1,0,0,0,0,0,0,0,0,0s0,0,0,0,0,0,0,0v0a.21.21,0,0,1,.12,0l.06,0h.07l.12-.07A.37.37,0,0,1,11.08,0a2.63,2.63,0,0,1,.43,0,4,4,0,0,1,.92.14l.34.11a4.75,4.75,0,0,1,.67.48l0,0v0a.08.08,0,0,0,.06,0l0,0A3.12,3.12,0,0,1,14,2a1.66,1.66,0,0,1-.11.58l0,.1v.06a1.31,1.31,0,0,1-.06.26.11.11,0,0,1-.06.06.08.08,0,0,0,0,.06v0a1.27,1.27,0,0,1-.17.26q-.06.1-.06.06h0a.17.17,0,0,1-.06.14l-.14.13-.12.1L13,4a2.9,2.9,0,0,1,.74.31s0,0,0,.06l0,0,.06,0,0,0a2.79,2.79,0,0,1,.4.66,2.46,2.46,0,0,1,.22.72.21.21,0,0,1,0,.1V6l0,.2a.49.49,0,0,1,0,.17l0,.17,0,.14v0a.91.91,0,0,1-.1.34.11.11,0,0,1-.06.06.17.17,0,0,0-.06.08v0l-.2.35a.11.11,0,0,1-.07.08h0l0,0h0c0,.06-.06.14-.18.24a3,3,0,0,1-.37.28l-.2.16h-.06l-.1,0,0,0-.16.06-.32.11h-.07l-.07,0-.06,0-.07,0a1.38,1.38,0,0,1-.4,0h-.23a1.82,1.82,0,0,1-.35-.06l-.12,0s0,0,0,0h0l-.19,0a1.4,1.4,0,0,1-.47-.07Zm.7-7.88,0,0a.59.59,0,0,0,.14.14.6.6,0,0,1,.23.31q0,.65.06.88a3.63,3.63,0,0,1,0,.48c0,.14,0,.28,0,.43a1.39,1.39,0,0,0,0,.19v.18s0,.07,0,.15,0,.2,0,.38h.31a1.57,1.57,0,0,0,.49-.43v0a.14.14,0,0,0,0-.1s0,0,0,0a.15.15,0,0,1,0-.07,0,0,0,0,0,0,0l.07-.22,0,0a.15.15,0,0,0,0-.05.43.43,0,0,0,0-.12,1.25,1.25,0,0,0,0-.19.48.48,0,0,0,0-.14.47.47,0,0,1,0-.14V2.05a.62.62,0,0,1,0-.14.1.1,0,0,1,0-.06,0,0,0,0,1,0,0v0l0,0h0v0h0l0-.14h0v0a1.19,1.19,0,0,0-.24-.43.47.47,0,0,0-.13-.14h0l0,0,0,0A2.18,2.18,0,0,0,11.68.7a1.62,1.62,0,0,0-.32-.08l-.24,0Zm.49,4.69v.06a.87.87,0,0,1,0,.29.43.43,0,0,1,0,.13l0,0a.13.13,0,0,1,0,.08.34.34,0,0,1,0,.17.07.07,0,0,1,0,0,0,0,0,0,0,0,0l0,0v.1a.58.58,0,0,0,0,.13s0,0,0,0h0s.07.06.07.1,0,0,0,0l0,0a.86.86,0,0,0,0,.23,1,1,0,0,0,0,.18v0a.08.08,0,0,0,0,.07s0,0,0,.07a.13.13,0,0,0,0,.06v.1a.65.65,0,0,0,0,.13l0,.1,0,0,0,0a.19.19,0,0,1,0,.08.33.33,0,0,1,0,.14l0,.1,0,.1h.07v0h.06a1.63,1.63,0,0,0,1-.43v0l0,0,0-.07a0,0,0,0,0,0,0,0,0,0,0,1,0,0,.19.19,0,0,1,0-.11l0-.06A1.3,1.3,0,0,0,13,7l0-.07,0-.07a.87.87,0,0,0,0-.19,1.6,1.6,0,0,0,0-.22l0-.24,0-.16c0-.22,0-.35,0-.4a.1.1,0,0,1,0-.06s0,0,0,0a.11.11,0,0,0,0-.08l0,0h0s0,0,0,0h0a.57.57,0,0,1,0-.18l0,0V5.19a1,1,0,0,0-.4-.52.92.92,0,0,0-.25-.11h-.11l-.15,0-.09,0h-.26Z" transform="translate(-0.8 0.04)"/><path d="M18.49,8.23v.3l0,.06,0,.06v0h0v0h0a1.87,1.87,0,0,1-.52.1v0h0v0h0v0l0,0h-.2l0,0h0s0,0-.1,0l-.08,0h-.4v0l0,0,0,0v0h-.07v0h0v0h-.07s0,0-.07,0a1,1,0,0,0-.31,0H16.1v0l-.19,0-.1,0h-.06l-.1,0h0l0,0h0l0-.06a1.61,1.61,0,0,1-.14-.24.1.1,0,0,1,0-.06h0s0,0,0-.07h0l0,0a.05.05,0,0,1,0,0V8a3.52,3.52,0,0,1-.08-.84c0-.06,0-.23,0-.52V6.27l0,0a.48.48,0,0,1,0-.12.16.16,0,0,0,0-.08V5.71a.21.21,0,0,0,0-.08l0-.24,0-.23,0-.12a.45.45,0,0,0,0-.11c0-.06,0-.2,0-.41a1.23,1.23,0,0,1,0-.18l0-.26a6.3,6.3,0,0,1,0-.64c0-.09,0-.18,0-.28v0a.21.21,0,0,1,0-.08V3a0,0,0,0,0,0,0,.68.68,0,0,0,0-.14v0a0,0,0,0,1,0,0h0v0h0a2.28,2.28,0,0,0,0-.26h0l0-.11V2.1q0-.11,0-.61V1.25l0,0s0-.06,0-.07h0v0h0q0-.31.06-.46s0,0,0-.1a.41.41,0,0,1,0-.12.06.06,0,0,0,0,0,.12.12,0,0,1,0-.05.35.35,0,0,1,0-.18h0s0,0,0,0v0h0v0h0v0h0l0,0s0,0,.06,0h0l0,0,.2,0H16l.07,0,.12,0h.11l.14.06.16.06a.33.33,0,0,1,.08.1,1.83,1.83,0,0,1,0,.48,1.67,1.67,0,0,1,0,.24l0,.25a.92.92,0,0,0,0,.16.69.69,0,0,1,0,.13v.37a1.73,1.73,0,0,0,0,.34v.12a.13.13,0,0,1,0,.06q0,.41,0,.83a.07.07,0,0,1-.08.08c-.06,0-.08,0-.08,0v.16a1,1,0,0,1,0,.24.44.44,0,0,0,0,.2l.05.16v.12a.32.32,0,0,0,0,.13h.12a1.3,1.3,0,0,1,0,.3.23.23,0,0,1,0,.12s0,0,0,0l0,0a.55.55,0,0,0,0,.16v.2h0l0,.12h0a.21.21,0,0,1,0,.13v.1a.13.13,0,0,0,0,.06,3.05,3.05,0,0,0,0,.68.17.17,0,0,1,0,.07.26.26,0,0,0,0,.08v0s0,0,0,.07v.1l0,.08v.1a2.15,2.15,0,0,0,0,.25.21.21,0,0,1,0,.08.22.22,0,0,0,.06.14l0,.08a.36.36,0,0,1,0,.12v.24l0,.16a.07.07,0,0,0,0,0H17l.22,0h0a.12.12,0,0,1,.12,0,0,0,0,0,1,0,0h.13l0,0a.06.06,0,0,1,.07,0h.22v0h.06V8l0,0v0h.1a0,0,0,0,0,0,0h0V8h0l.17,0c.06,0,.1,0,.11,0h0v.1l0,0Z" transform="translate(-0.8 0.04)"/><path d="M22.85,7.91h0a.14.14,0,0,1,0,.06v.49s0,0,0,0a.29.29,0,0,0,0,.05.19.19,0,0,1,0,.07h0v0h0a1,1,0,0,1-.48.1h-.19l-.16,0a0,0,0,0,1,0,0h-.14l-.1,0h-.46v0h-.07v0h-.2v0l-.07,0h-.5l-.08,0h-.44l-.12,0-.08-.05h0v0s0,0,0,0h0a0,0,0,0,1,0,0,.13.13,0,0,1,0-.07.17.17,0,0,0,0-.1.39.39,0,0,0,0-.12l0-.11a1.28,1.28,0,0,1-.11-.43V7.48l0,0h0a.31.31,0,0,1,0-.1V7.1a.38.38,0,0,1,0-.11.17.17,0,0,0,0-.07l0-.25a.43.43,0,0,0,0-.1.41.41,0,0,1,0-.1l0-.13a.52.52,0,0,0,0-.12q0-.19,0-.36V5.58c0-.07,0-.17,0-.31s0-.25,0-.37,0-.27,0-.37V4.18a.17.17,0,0,0,0-.07V4l0-.11V3.65l0,0V3.25h0a.12.12,0,0,1,0-.12V2.8q0-.12,0-.74V1.74a0,0,0,0,1,0,0l0,0v0a2.42,2.42,0,0,1,0-.48V.95a.24.24,0,0,1,0-.14.14.14,0,0,1,0-.11h0v0l0,0h0v0a.07.07,0,0,0,0,0V.51l0-.07,0-.05,0-.07h.18l.11,0,.1,0h.37s0,0,0,0l0,0h0v0h0v0a1.53,1.53,0,0,1,.48,0l.23,0,0,0v0h0l.12,0a0,0,0,0,1,0,0h.17l.06,0a.12.12,0,0,1,.08,0v0l0,0v0a.22.22,0,0,0,.12,0h.14s0,0,0,0v0h0a0,0,0,0,1,0,0h0v0h.12a0,0,0,0,1,0,0l.06,0a0,0,0,0,1,0,0,.3.3,0,0,1,.22.05c.1.05.15.09.16.11a.14.14,0,0,1,0,.06,0,0,0,0,1,0,0l0,.12,0,0v0a1.89,1.89,0,0,1-.06.25,3.07,3.07,0,0,1-.11.31l0,0,0,0-.06.07h0l0,0h0v.06l0-.06-.1,0H22.4l-.18,0-.18,0v0h-.08s0,0-.06,0h-.07l-.07,0h-.16l-.2,0-.2,0h-.24v0l0,.34a.92.92,0,0,0,0,.16v.67A3.06,3.06,0,0,0,21,3V3.1a.07.07,0,0,0,0,0l0,.1q0,.5,0,.74h.12l.17,0,0,0h.1V4h.24a.44.44,0,0,0,.17,0h0v0H22l0,0h0V4h0l.1,0,.08.06,0,0a.2.2,0,0,1,0,.1h0l0,.07,0,.35,0,.06,0,0h0v0h0a1.6,1.6,0,0,1-.4.06h-.06v0h0v0h0v0h0v0h-.06l-.12,0h-.06s0,0-.06,0H21v0h0a2.52,2.52,0,0,1,0,.49l0,.22a.2.2,0,0,0,0,.1l0,.07a1,1,0,0,1,0,.18V6a.11.11,0,0,1,0,.1l0,.06,0,0v.17a1.43,1.43,0,0,1,0,.23l0,.12h0a.2.2,0,0,1,0,.12V7a2.43,2.43,0,0,0,0,.4,1.05,1.05,0,0,0,0,.19v.12h.49l.25,0h0l0,0a.21.21,0,0,1,.12,0v0h.58l0,0,.06,0,.07,0h0l0,0h0v0h0a0,0,0,0,1,0,0l.12,0,.07.07v0s0,.06,0,.16ZM21.43,4h0s0,0,0,0Z" transform="translate(-0.8 0.04)"/><path d="M27.68,6.23v.28a2.36,2.36,0,0,1,0,.29L27.61,7l-.06,0V7a.43.43,0,0,1,0,.12,1.17,1.17,0,0,1-.06.35,1.13,1.13,0,0,1-.14.31,2.52,2.52,0,0,1-1.14.83l-.23,0h0l-.12,0h-.28a3.11,3.11,0,0,1-.61,0l-.25-.07-.13,0-.16,0a2.14,2.14,0,0,1-.5-.41,1.86,1.86,0,0,1-.33-.47A1.48,1.48,0,0,1,23.39,7V6.71c0-.06,0-.1.08-.1h.13V6.47a.65.65,0,0,1,0-.13s0,0,0,0l.34,0a1.19,1.19,0,0,1,.4.11q.08,0,.19.17l.1.16s0,0,0,.1h0v.06s0,0,0,.06V7q.26.35.4.49a2.8,2.8,0,0,0,.35.31.28.28,0,0,1,.1.07s0,0,.06,0H26a.58.58,0,0,0,0-.16V7.61l0-.14a.46.46,0,0,0,0-.11l.08-.21a.66.66,0,0,0,.06-.26.68.68,0,0,0-.07-.28,1.61,1.61,0,0,0,0-.22.25.25,0,0,0,0-.11,2.27,2.27,0,0,0-.66-1.21L25.36,5l-.12-.13a4.14,4.14,0,0,0-.29-.34c-.07-.07-.14-.1-.19-.07l-.08-.06a.5.5,0,0,1-.18-.17.18.18,0,0,1-.06-.07L24.29,4l-.1-.1a.07.07,0,0,1,0,0l0,0q-.14-.24-.28-.52h0a.13.13,0,0,1,0-.1V3a.93.93,0,0,1-.06-.34,2.26,2.26,0,0,1,.2-.88A5.35,5.35,0,0,1,24.36,1a1.26,1.26,0,0,1,.25-.25l.12-.12.08-.06,0,0L25,.45A3.52,3.52,0,0,1,26.16.21a1.05,1.05,0,0,1,.44.08,1.9,1.9,0,0,1,.4.26.77.77,0,0,1,.26.32c.06.06.1.11.1.13h0l.08.12v.11l0,.12,0,.06h0a.27.27,0,0,1,0,.08,0,0,0,0,0,0,0v0a.38.38,0,0,1-.16.16c-.09.06-.15.07-.17,0l0,0v0a0,0,0,0,1,0,0s-.11,0-.19-.12h0a.1.1,0,0,1-.06,0l-.11-.1-.19-.1c-.18-.06-.29-.11-.32-.17a1,1,0,0,1-.1-.19Q26,.9,25.92.88c-.1,0-.2,0-.29.16a1.88,1.88,0,0,0-.23.61,3.55,3.55,0,0,0-.11.77.94.94,0,0,0,0,.29v.08a0,0,0,0,1,0,0h0a2.42,2.42,0,0,0,.31.59,2.55,2.55,0,0,0,.46.55,5.56,5.56,0,0,1,.78.79.61.61,0,0,0,0,.28q0,.19.2.19a.4.4,0,0,0,.16,0,1.49,1.49,0,0,0,.22.44s0,0,0-.08,0-.08,0-.06a.7.7,0,0,1,0,.18v0a.65.65,0,0,0,0,.14l0,.07h0Zm-.83-4.6h0S26.86,1.63,26.86,1.63Z" transform="translate(-0.8 0.04)"/></svg>
            </a>
          </div>
          <div id='menu-links'>
            {lang.navigation.mainmenu.map((nav, index) => (
              this.getNavItem(index, nav)
            ))}
          </div>
          { this.getProfile() }
        </nav>
        <nav id='menu-loc'>
          <ul>
            <li>
              <div className="language">
                <select onChange={ this.setLang.bind(this) }>
                  <option value='en'>{ lang.chooseRegion }</option>
                  {lang.getAvailableLanguages().map((lang, index) => (
                    <option key={ index } value={ lang }>{ lang }</option>
                  ))}
                </select>
              </div>
            </li>
          </ul>
        </nav>
      </header>
    );
  }
}

function mapStateToProps(state) {
  return {
    lang: state.lang,
    user: state.user
  };
}

MainMenu.contextTypes = {
  router: PropTypes.object.isRequired
};

export default connect(mapStateToProps)(MainMenu);
